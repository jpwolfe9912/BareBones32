ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"drv_spi1.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.transferCompleteCallback,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-sp-d16
  25              	transferCompleteCallback:
  26              	.LFB192:
  27              		.file 1 "Src/drv/drv_spi1.c"
   1:Src/drv/drv_spi1.c **** /** @file 		drv_spi.c
   2:Src/drv/drv_spi1.c ****  *  @brief
   3:Src/drv/drv_spi1.c ****  *  	This file initializes the SPI peripheral as well as writes
   4:Src/drv/drv_spi1.c ****  *  	and reads to another device over SPI
   5:Src/drv/drv_spi1.c ****  *
   6:Src/drv/drv_spi1.c ****  *  Still needs to implement SPI2 for OSD chip
   7:Src/drv/drv_spi1.c ****  *  Find a way to reuse write and read functions for SPI1 and SPI2
   8:Src/drv/drv_spi1.c ****  *
   9:Src/drv/drv_spi1.c ****  *  @author 	Jeremy Wolfe
  10:Src/drv/drv_spi1.c ****  *  @date 		23 FEB 2022
  11:Src/drv/drv_spi1.c ****  */
  12:Src/drv/drv_spi1.c **** 
  13:Src/drv/drv_spi1.c **** /* Includes */
  14:Src/drv/drv_spi1.c **** #include "board.h"
  15:Src/drv/drv_spi1.c **** 
  16:Src/drv/drv_spi1.c **** volatile bool transferComplete = false;
  17:Src/drv/drv_spi1.c **** 
  18:Src/drv/drv_spi1.c **** static void transferCompleteCallback(void);
  19:Src/drv/drv_spi1.c **** 
  20:Src/drv/drv_spi1.c **** /** @brief Initializes SPI1.
  21:Src/drv/drv_spi1.c ****  *
  22:Src/drv/drv_spi1.c ****  *  @return Void.
  23:Src/drv/drv_spi1.c ****  */
  24:Src/drv/drv_spi1.c **** void spi1Init(void)
  25:Src/drv/drv_spi1.c **** {
  26:Src/drv/drv_spi1.c ****     printf("\nInitializing SPI 1\n");
  27:Src/drv/drv_spi1.c **** 
  28:Src/drv/drv_spi1.c ****     /* USER CODE BEGIN SPI1_Init 0 */
  29:Src/drv/drv_spi1.c ****     /////////////////GPIO INIT///////////////////
  30:Src/drv/drv_spi1.c ****     // enable clock for GPIOA
  31:Src/drv/drv_spi1.c ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 2


  32:Src/drv/drv_spi1.c ****     // set mode, speed, type, pull, AF
  33:Src/drv/drv_spi1.c ****     /* CS Pin */
  34:Src/drv/drv_spi1.c ****     GPIOA->MODER &= ~GPIO_MODER_MODER4;
  35:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER4_1; // AF mode
  36:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR4;
  37:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT4;
  38:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR4_0; // no pull
  39:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL4;
  40:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 4U)); // AF 5
  41:Src/drv/drv_spi1.c **** 
  42:Src/drv/drv_spi1.c ****     /* SCK Pin */
  43:Src/drv/drv_spi1.c ****     GPIOA->MODER &= ~GPIO_MODER_MODER5;
  44:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER5_1; // AF Mode
  45:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR5;
  46:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT5;
  47:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR5_0; // no pull
  48:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL5;
  49:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 5U)); // AF 5
  50:Src/drv/drv_spi1.c **** 
  51:Src/drv/drv_spi1.c ****     /* MISO Pin */
  52:Src/drv/drv_spi1.c ****     GPIOA->MODER &= ~GPIO_MODER_MODER6;
  53:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER6_1; // AF mode
  54:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR6;
  55:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT6;
  56:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR6_0; // no pull
  57:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL6;
  58:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 6U)); // AF 5
  59:Src/drv/drv_spi1.c **** 
  60:Src/drv/drv_spi1.c ****     /* MOSI Pin */
  61:Src/drv/drv_spi1.c ****     GPIOA->MODER &= ~GPIO_MODER_MODER7;
  62:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER7_1; // AF mode
  63:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR7;
  64:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT7;
  65:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR7_0; // no pull
  66:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL7;
  67:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 7U)); // AF 5
  68:Src/drv/drv_spi1.c **** 
  69:Src/drv/drv_spi1.c ****     /////////////////SPI INIT///////////////////
  70:Src/drv/drv_spi1.c ****     // enable clock for SPI1
  71:Src/drv/drv_spi1.c ****     RCC->APB2ENR |= RCC_APB2ENR_SPI1EN;
  72:Src/drv/drv_spi1.c **** 
  73:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SPE;      // disable SPI
  74:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_BIDIMODE; // rx and tx
  75:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_MSTR;      // SPI master
  76:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (0x7 << 8U);       // byte transfer size
  77:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPHA;      // high polarity
  78:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPOL;      // 2nd edge
  79:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSM;      // software slave management
  80:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSI;
  81:Src/drv/drv_spi1.c ****     SPI1->CR2 |= SPI_CR2_SSOE;
  82:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_BR_PRESCALER_128; // BR < 1MHz for init
  83:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_LSBFIRST;    // MSB first
  84:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_CRCEN;       // disable CRC
  85:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (SPI_CR2_RXDMAEN |
  86:Src/drv/drv_spi1.c ****                   SPI_CR2_TXDMAEN);
  87:Src/drv/drv_spi1.c ****     SPI1->CR2 |= SPI_CR2_FRXTH;
  88:Src/drv/drv_spi1.c **** 
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 3


  89:Src/drv/drv_spi1.c ****     /////////////////DMA INIT///////////////////
  90:Src/drv/drv_spi1.c ****     /*
  91:Src/drv/drv_spi1.c ****      * SPI1_RX on DMA2_Stream0_CH3
  92:Src/drv/drv_spi1.c ****      * SPI1_TX on DMA2_Stream3_CH3
  93:Src/drv/drv_spi1.c ****      */
  94:Src/drv/drv_spi1.c **** 
  95:Src/drv/drv_spi1.c ****     // disable DMA stream 1
  96:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_EN;
  97:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
  98:Src/drv/drv_spi1.c ****         ;
  99:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR = 0;
 100:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 101:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = 0;
 102:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 103:Src/drv/drv_spi1.c ****     DMA2_Stream0->M1AR = 0;
 104:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR = 0x00000021U;
 105:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CHSEL;
 106:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0000003FU;
 107:Src/drv/drv_spi1.c ****     // disable DMA stream 7
 108:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_EN;
 109:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 110:Src/drv/drv_spi1.c ****         ;
 111:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR = 0;
 112:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 113:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = 0;
 114:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 115:Src/drv/drv_spi1.c ****     DMA2_Stream3->M1AR = 0;
 116:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR = 0x00000021U;
 117:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CHSEL;
 118:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0F400000U;
 119:Src/drv/drv_spi1.c **** 
 120:Src/drv/drv_spi1.c ****     // RX DMA settings
 121:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 122:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 123:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_DIR;     // per to mem
 124:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 125:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 126:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MBURST;
 127:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PBURST;
 128:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = (uint32_t)(&(SPI1->DR));
 129:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 130:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PINC;
 131:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_MINC;
 132:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MSIZE;
 133:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PSIZE;
 134:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CIRC;
 135:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_PL;
 136:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 137:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_TCIE;
 138:Src/drv/drv_spi1.c ****     // TX DMA settings
 139:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 140:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 141:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_DIR_0;    // mem to per
 142:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 143:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 144:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MBURST;
 145:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PBURST;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 4


 146:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = (uint32_t)(&(SPI1->DR));
 147:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 148:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PINC;
 149:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_MINC;
 150:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MSIZE;
 151:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PSIZE;
 152:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CIRC;
 153:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_PL;
 154:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 155:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_TCIE;
 156:Src/drv/drv_spi1.c **** }
 157:Src/drv/drv_spi1.c **** 
 158:Src/drv/drv_spi1.c **** /** @brief Reads multiple bytes of data in.
 159:Src/drv/drv_spi1.c ****  *
 160:Src/drv/drv_spi1.c ****  *  @param reg The hex value of the first register to read from.
 161:Src/drv/drv_spi1.c ****  *  @param *pData A pointer to location where you want to read data to.
 162:Src/drv/drv_spi1.c ****  *  @param size The amount of bytes to be read.
 163:Src/drv/drv_spi1.c ****  *  @return Void.
 164:Src/drv/drv_spi1.c ****  */
 165:Src/drv/drv_spi1.c **** void spi1ReadBytes(uint8_t reg, uint8_t *pData, uint8_t size)
 166:Src/drv/drv_spi1.c **** {
 167:Src/drv/drv_spi1.c ****     reg = reg | 0x80; // read operation
 168:Src/drv/drv_spi1.c **** 
 169:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_EN;
 170:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 171:Src/drv/drv_spi1.c ****         ;
 172:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 173:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 174:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
 175:Src/drv/drv_spi1.c **** 
 176:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_EN;
 177:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 178:Src/drv/drv_spi1.c ****         ;
 179:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 180:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 181:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 182:Src/drv/drv_spi1.c **** 
 183:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_SPE;
 184:Src/drv/drv_spi1.c **** 
 185:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_EN;
 186:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 187:Src/drv/drv_spi1.c **** 
 188:Src/drv/drv_spi1.c ****     transferCompleteCallback();
 189:Src/drv/drv_spi1.c **** }
 190:Src/drv/drv_spi1.c **** 
 191:Src/drv/drv_spi1.c **** /** @brief Writes multiple bytes of data in.
 192:Src/drv/drv_spi1.c ****  *
 193:Src/drv/drv_spi1.c ****  *  @param reg The hex value of the register to write to.
 194:Src/drv/drv_spi1.c ****  *  @param *pData A pointer to the data you want to write.
 195:Src/drv/drv_spi1.c ****  *  @param size The amount of bytes to write.
 196:Src/drv/drv_spi1.c ****  *  @return Void.
 197:Src/drv/drv_spi1.c ****  */
 198:Src/drv/drv_spi1.c **** void spi1WriteBytes(uint8_t *pData, uint8_t size)
 199:Src/drv/drv_spi1.c **** {
 200:Src/drv/drv_spi1.c ****     // RX Setup
 201:Src/drv/drv_spi1.c ****     static uint8_t dummy __attribute__((unused));
 202:Src/drv/drv_spi1.c **** 
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 5


 203:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_EN;
 204:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 205:Src/drv/drv_spi1.c ****         ;
 206:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 207:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 208:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 209:Src/drv/drv_spi1.c ****     // TX Setup
 210:Src/drv/drv_spi1.c ****     // perhaps include a circular buffer
 211:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_EN;
 212:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 213:Src/drv/drv_spi1.c ****         ;
 214:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 215:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 216:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)pData;
 217:Src/drv/drv_spi1.c **** 
 218:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_TCIE; // RX interrupts
 219:Src/drv/drv_spi1.c **** 
 220:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_SPE;
 221:Src/drv/drv_spi1.c **** 
 222:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_EN;
 223:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 224:Src/drv/drv_spi1.c **** 
 225:Src/drv/drv_spi1.c ****     transferCompleteCallback();
 226:Src/drv/drv_spi1.c **** }
 227:Src/drv/drv_spi1.c **** 
 228:Src/drv/drv_spi1.c **** /** @brief Reads one byte of data in.
 229:Src/drv/drv_spi1.c ****  *
 230:Src/drv/drv_spi1.c ****  *  @param reg The hex value of the register to read from.
 231:Src/drv/drv_spi1.c ****  *  @param *pData A pointer to location where you want to read data to.
 232:Src/drv/drv_spi1.c ****  *  @return Void.
 233:Src/drv/drv_spi1.c ****  */
 234:Src/drv/drv_spi1.c **** void spi1ReadOneByte(uint8_t reg, uint8_t *pData)
 235:Src/drv/drv_spi1.c **** {
 236:Src/drv/drv_spi1.c ****     reg |= 0x80; // read operation
 237:Src/drv/drv_spi1.c **** 
 238:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_EN;
 239:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 240:Src/drv/drv_spi1.c ****         ;
 241:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 242:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 243:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
 244:Src/drv/drv_spi1.c **** 
 245:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_EN;
 246:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 247:Src/drv/drv_spi1.c ****         ;
 248:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 249:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 250:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 251:Src/drv/drv_spi1.c **** 
 252:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_SPE;
 253:Src/drv/drv_spi1.c **** 
 254:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_EN;
 255:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 256:Src/drv/drv_spi1.c **** 
 257:Src/drv/drv_spi1.c ****     transferCompleteCallback();
 258:Src/drv/drv_spi1.c **** }
 259:Src/drv/drv_spi1.c **** 
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 6


 260:Src/drv/drv_spi1.c **** /** @brief Writes one byte of data.
 261:Src/drv/drv_spi1.c ****  *
 262:Src/drv/drv_spi1.c ****  *  @param reg The hex value of the register to write to.
 263:Src/drv/drv_spi1.c ****  *  @param data The data to write.
 264:Src/drv/drv_spi1.c ****  *  @return Void.
 265:Src/drv/drv_spi1.c ****  */
 266:Src/drv/drv_spi1.c **** void spi1WriteOneByte(uint8_t reg, uint8_t data)
 267:Src/drv/drv_spi1.c **** {
 268:Src/drv/drv_spi1.c ****     // need to pass in array of values to be written
 269:Src/drv/drv_spi1.c ****     // RX Setup
 270:Src/drv/drv_spi1.c ****     static uint8_t dummy __attribute__((unused));
 271:Src/drv/drv_spi1.c ****     uint8_t temp[2] = {reg, data};
 272:Src/drv/drv_spi1.c **** 
 273:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_EN;
 274:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 275:Src/drv/drv_spi1.c ****         ;
 276:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 277:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 278:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 279:Src/drv/drv_spi1.c ****     // TX Setup
 280:Src/drv/drv_spi1.c ****     // perhaps include a circular buffer
 281:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_EN;
 282:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 283:Src/drv/drv_spi1.c ****         ;
 284:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 285:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 286:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)temp;
 287:Src/drv/drv_spi1.c **** 
 288:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_SPE;
 289:Src/drv/drv_spi1.c **** 
 290:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_EN;
 291:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 292:Src/drv/drv_spi1.c **** 
 293:Src/drv/drv_spi1.c ****     transferCompleteCallback();
 294:Src/drv/drv_spi1.c **** }
 295:Src/drv/drv_spi1.c **** 
 296:Src/drv/drv_spi1.c **** static void transferCompleteCallback(void)
 297:Src/drv/drv_spi1.c **** {
  28              		.loc 1 297 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.L2:
 298:Src/drv/drv_spi1.c ****     while (!transferComplete)
 299:Src/drv/drv_spi1.c ****         ;
  34              		.loc 1 299 9 discriminator 1 view .LVU1
 298:Src/drv/drv_spi1.c ****     while (!transferComplete)
  35              		.loc 1 298 11 discriminator 1 view .LVU2
 298:Src/drv/drv_spi1.c ****     while (!transferComplete)
  36              		.loc 1 298 12 is_stmt 0 discriminator 1 view .LVU3
  37 0000 064B     		ldr	r3, .L3
  38 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 298:Src/drv/drv_spi1.c ****     while (!transferComplete)
  39              		.loc 1 298 11 discriminator 1 view .LVU4
  40 0004 002B     		cmp	r3, #0
  41 0006 FBD0     		beq	.L2
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 7


 300:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SPE;
  42              		.loc 1 300 5 is_stmt 1 view .LVU5
  43              		.loc 1 300 15 is_stmt 0 view .LVU6
  44 0008 054A     		ldr	r2, .L3+4
  45 000a 1368     		ldr	r3, [r2]
  46 000c 23F04003 		bic	r3, r3, #64
  47 0010 1360     		str	r3, [r2]
 301:Src/drv/drv_spi1.c ****     transferComplete = false;
  48              		.loc 1 301 5 is_stmt 1 view .LVU7
  49              		.loc 1 301 22 is_stmt 0 view .LVU8
  50 0012 024B     		ldr	r3, .L3
  51 0014 0022     		movs	r2, #0
  52 0016 1A70     		strb	r2, [r3]
 302:Src/drv/drv_spi1.c **** }
  53              		.loc 1 302 1 view .LVU9
  54 0018 7047     		bx	lr
  55              	.L4:
  56 001a 00BF     		.align	2
  57              	.L3:
  58 001c 00000000 		.word	.LANCHOR0
  59 0020 00300140 		.word	1073819648
  60              		.cfi_endproc
  61              	.LFE192:
  63              		.section	.rodata.spi1Init.str1.4,"aMS",%progbits,1
  64              		.align	2
  65              	.LC0:
  66 0000 0A496E69 		.ascii	"\012Initializing SPI 1\000"
  66      7469616C 
  66      697A696E 
  66      67205350 
  66      49203100 
  67              		.section	.text.spi1Init,"ax",%progbits
  68              		.align	1
  69              		.global	spi1Init
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv5-sp-d16
  75              	spi1Init:
  76              	.LFB187:
  25:Src/drv/drv_spi1.c ****     printf("\nInitializing SPI 1\n");
  77              		.loc 1 25 1 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81 0000 08B5     		push	{r3, lr}
  82              		.cfi_def_cfa_offset 8
  83              		.cfi_offset 3, -8
  84              		.cfi_offset 14, -4
  26:Src/drv/drv_spi1.c **** 
  85              		.loc 1 26 5 view .LVU11
  86 0002 A548     		ldr	r0, .L9
  87 0004 FFF7FEFF 		bl	puts
  88              	.LVL0:
  31:Src/drv/drv_spi1.c ****     // set mode, speed, type, pull, AF
  89              		.loc 1 31 5 view .LVU12
  31:Src/drv/drv_spi1.c ****     // set mode, speed, type, pull, AF
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 8


  90              		.loc 1 31 18 is_stmt 0 view .LVU13
  91 0008 A44A     		ldr	r2, .L9+4
  92 000a 136B     		ldr	r3, [r2, #48]
  93 000c 43F00103 		orr	r3, r3, #1
  94 0010 1363     		str	r3, [r2, #48]
  34:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER4_1; // AF mode
  95              		.loc 1 34 5 is_stmt 1 view .LVU14
  34:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER4_1; // AF mode
  96              		.loc 1 34 18 is_stmt 0 view .LVU15
  97 0012 A34B     		ldr	r3, .L9+8
  98 0014 1968     		ldr	r1, [r3]
  99 0016 21F44071 		bic	r1, r1, #768
 100 001a 1960     		str	r1, [r3]
  35:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR4;
 101              		.loc 1 35 5 is_stmt 1 view .LVU16
  35:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR4;
 102              		.loc 1 35 18 is_stmt 0 view .LVU17
 103 001c 1968     		ldr	r1, [r3]
 104 001e 41F40071 		orr	r1, r1, #512
 105 0022 1960     		str	r1, [r3]
  36:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT4;
 106              		.loc 1 36 5 is_stmt 1 view .LVU18
  36:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT4;
 107              		.loc 1 36 20 is_stmt 0 view .LVU19
 108 0024 9968     		ldr	r1, [r3, #8]
 109 0026 41F44071 		orr	r1, r1, #768
 110 002a 9960     		str	r1, [r3, #8]
  37:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR4_0; // no pull
 111              		.loc 1 37 5 is_stmt 1 view .LVU20
  37:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR4_0; // no pull
 112              		.loc 1 37 19 is_stmt 0 view .LVU21
 113 002c 5968     		ldr	r1, [r3, #4]
 114 002e 21F01001 		bic	r1, r1, #16
 115 0032 5960     		str	r1, [r3, #4]
  38:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL4;
 116              		.loc 1 38 5 is_stmt 1 view .LVU22
  38:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL4;
 117              		.loc 1 38 18 is_stmt 0 view .LVU23
 118 0034 D968     		ldr	r1, [r3, #12]
 119 0036 41F48071 		orr	r1, r1, #256
 120 003a D960     		str	r1, [r3, #12]
  39:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 4U)); // AF 5
 121              		.loc 1 39 5 is_stmt 1 view .LVU24
  39:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 4U)); // AF 5
 122              		.loc 1 39 19 is_stmt 0 view .LVU25
 123 003c 196A     		ldr	r1, [r3, #32]
 124 003e 21F47021 		bic	r1, r1, #983040
 125 0042 1962     		str	r1, [r3, #32]
  40:Src/drv/drv_spi1.c **** 
 126              		.loc 1 40 5 is_stmt 1 view .LVU26
  40:Src/drv/drv_spi1.c **** 
 127              		.loc 1 40 19 is_stmt 0 view .LVU27
 128 0044 196A     		ldr	r1, [r3, #32]
 129 0046 41F4A021 		orr	r1, r1, #327680
 130 004a 1962     		str	r1, [r3, #32]
  43:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER5_1; // AF Mode
 131              		.loc 1 43 5 is_stmt 1 view .LVU28
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 9


  43:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER5_1; // AF Mode
 132              		.loc 1 43 18 is_stmt 0 view .LVU29
 133 004c 1968     		ldr	r1, [r3]
 134 004e 21F44061 		bic	r1, r1, #3072
 135 0052 1960     		str	r1, [r3]
  44:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR5;
 136              		.loc 1 44 5 is_stmt 1 view .LVU30
  44:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR5;
 137              		.loc 1 44 18 is_stmt 0 view .LVU31
 138 0054 1968     		ldr	r1, [r3]
 139 0056 41F40061 		orr	r1, r1, #2048
 140 005a 1960     		str	r1, [r3]
  45:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT5;
 141              		.loc 1 45 5 is_stmt 1 view .LVU32
  45:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT5;
 142              		.loc 1 45 20 is_stmt 0 view .LVU33
 143 005c 9968     		ldr	r1, [r3, #8]
 144 005e 41F44061 		orr	r1, r1, #3072
 145 0062 9960     		str	r1, [r3, #8]
  46:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR5_0; // no pull
 146              		.loc 1 46 5 is_stmt 1 view .LVU34
  46:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR5_0; // no pull
 147              		.loc 1 46 19 is_stmt 0 view .LVU35
 148 0064 5968     		ldr	r1, [r3, #4]
 149 0066 21F02001 		bic	r1, r1, #32
 150 006a 5960     		str	r1, [r3, #4]
  47:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL5;
 151              		.loc 1 47 5 is_stmt 1 view .LVU36
  47:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL5;
 152              		.loc 1 47 18 is_stmt 0 view .LVU37
 153 006c D968     		ldr	r1, [r3, #12]
 154 006e 41F48061 		orr	r1, r1, #1024
 155 0072 D960     		str	r1, [r3, #12]
  48:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 5U)); // AF 5
 156              		.loc 1 48 5 is_stmt 1 view .LVU38
  48:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 5U)); // AF 5
 157              		.loc 1 48 19 is_stmt 0 view .LVU39
 158 0074 196A     		ldr	r1, [r3, #32]
 159 0076 21F47001 		bic	r1, r1, #15728640
 160 007a 1962     		str	r1, [r3, #32]
  49:Src/drv/drv_spi1.c **** 
 161              		.loc 1 49 5 is_stmt 1 view .LVU40
  49:Src/drv/drv_spi1.c **** 
 162              		.loc 1 49 19 is_stmt 0 view .LVU41
 163 007c 196A     		ldr	r1, [r3, #32]
 164 007e 41F4A001 		orr	r1, r1, #5242880
 165 0082 1962     		str	r1, [r3, #32]
  52:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER6_1; // AF mode
 166              		.loc 1 52 5 is_stmt 1 view .LVU42
  52:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER6_1; // AF mode
 167              		.loc 1 52 18 is_stmt 0 view .LVU43
 168 0084 1968     		ldr	r1, [r3]
 169 0086 21F44051 		bic	r1, r1, #12288
 170 008a 1960     		str	r1, [r3]
  53:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR6;
 171              		.loc 1 53 5 is_stmt 1 view .LVU44
  53:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR6;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 10


 172              		.loc 1 53 18 is_stmt 0 view .LVU45
 173 008c 1968     		ldr	r1, [r3]
 174 008e 41F40051 		orr	r1, r1, #8192
 175 0092 1960     		str	r1, [r3]
  54:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT6;
 176              		.loc 1 54 5 is_stmt 1 view .LVU46
  54:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT6;
 177              		.loc 1 54 20 is_stmt 0 view .LVU47
 178 0094 9968     		ldr	r1, [r3, #8]
 179 0096 41F44051 		orr	r1, r1, #12288
 180 009a 9960     		str	r1, [r3, #8]
  55:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR6_0; // no pull
 181              		.loc 1 55 5 is_stmt 1 view .LVU48
  55:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR6_0; // no pull
 182              		.loc 1 55 19 is_stmt 0 view .LVU49
 183 009c 5968     		ldr	r1, [r3, #4]
 184 009e 21F04001 		bic	r1, r1, #64
 185 00a2 5960     		str	r1, [r3, #4]
  56:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL6;
 186              		.loc 1 56 5 is_stmt 1 view .LVU50
  56:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL6;
 187              		.loc 1 56 18 is_stmt 0 view .LVU51
 188 00a4 D968     		ldr	r1, [r3, #12]
 189 00a6 41F48051 		orr	r1, r1, #4096
 190 00aa D960     		str	r1, [r3, #12]
  57:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 6U)); // AF 5
 191              		.loc 1 57 5 is_stmt 1 view .LVU52
  57:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 6U)); // AF 5
 192              		.loc 1 57 19 is_stmt 0 view .LVU53
 193 00ac 196A     		ldr	r1, [r3, #32]
 194 00ae 21F07061 		bic	r1, r1, #251658240
 195 00b2 1962     		str	r1, [r3, #32]
  58:Src/drv/drv_spi1.c **** 
 196              		.loc 1 58 5 is_stmt 1 view .LVU54
  58:Src/drv/drv_spi1.c **** 
 197              		.loc 1 58 19 is_stmt 0 view .LVU55
 198 00b4 196A     		ldr	r1, [r3, #32]
 199 00b6 41F0A061 		orr	r1, r1, #83886080
 200 00ba 1962     		str	r1, [r3, #32]
  61:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER7_1; // AF mode
 201              		.loc 1 61 5 is_stmt 1 view .LVU56
  61:Src/drv/drv_spi1.c ****     GPIOA->MODER |= GPIO_MODER_MODER7_1; // AF mode
 202              		.loc 1 61 18 is_stmt 0 view .LVU57
 203 00bc 1968     		ldr	r1, [r3]
 204 00be 21F44041 		bic	r1, r1, #49152
 205 00c2 1960     		str	r1, [r3]
  62:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR7;
 206              		.loc 1 62 5 is_stmt 1 view .LVU58
  62:Src/drv/drv_spi1.c ****     GPIOA->OSPEEDR |= GPIO_OSPEEDR_OSPEEDR7;
 207              		.loc 1 62 18 is_stmt 0 view .LVU59
 208 00c4 1968     		ldr	r1, [r3]
 209 00c6 41F40041 		orr	r1, r1, #32768
 210 00ca 1960     		str	r1, [r3]
  63:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT7;
 211              		.loc 1 63 5 is_stmt 1 view .LVU60
  63:Src/drv/drv_spi1.c ****     GPIOA->OTYPER &= ~GPIO_OTYPER_OT7;
 212              		.loc 1 63 20 is_stmt 0 view .LVU61
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 11


 213 00cc 9968     		ldr	r1, [r3, #8]
 214 00ce 41F44041 		orr	r1, r1, #49152
 215 00d2 9960     		str	r1, [r3, #8]
  64:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR7_0; // no pull
 216              		.loc 1 64 5 is_stmt 1 view .LVU62
  64:Src/drv/drv_spi1.c ****     GPIOA->PUPDR |= GPIO_PUPDR_PUPDR7_0; // no pull
 217              		.loc 1 64 19 is_stmt 0 view .LVU63
 218 00d4 5968     		ldr	r1, [r3, #4]
 219 00d6 21F08001 		bic	r1, r1, #128
 220 00da 5960     		str	r1, [r3, #4]
  65:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL7;
 221              		.loc 1 65 5 is_stmt 1 view .LVU64
  65:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] &= ~GPIO_AFRL_AFRL7;
 222              		.loc 1 65 18 is_stmt 0 view .LVU65
 223 00dc D968     		ldr	r1, [r3, #12]
 224 00de 41F48041 		orr	r1, r1, #16384
 225 00e2 D960     		str	r1, [r3, #12]
  66:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 7U)); // AF 5
 226              		.loc 1 66 5 is_stmt 1 view .LVU66
  66:Src/drv/drv_spi1.c ****     GPIOA->AFR[0] |= (0x5 << (4U * 7U)); // AF 5
 227              		.loc 1 66 19 is_stmt 0 view .LVU67
 228 00e4 196A     		ldr	r1, [r3, #32]
 229 00e6 21F07041 		bic	r1, r1, #-268435456
 230 00ea 1962     		str	r1, [r3, #32]
  67:Src/drv/drv_spi1.c **** 
 231              		.loc 1 67 5 is_stmt 1 view .LVU68
  67:Src/drv/drv_spi1.c **** 
 232              		.loc 1 67 19 is_stmt 0 view .LVU69
 233 00ec 196A     		ldr	r1, [r3, #32]
 234 00ee 41F0A041 		orr	r1, r1, #1342177280
 235 00f2 1962     		str	r1, [r3, #32]
  71:Src/drv/drv_spi1.c **** 
 236              		.loc 1 71 5 is_stmt 1 view .LVU70
  71:Src/drv/drv_spi1.c **** 
 237              		.loc 1 71 18 is_stmt 0 view .LVU71
 238 00f4 536C     		ldr	r3, [r2, #68]
 239 00f6 43F48053 		orr	r3, r3, #4096
 240 00fa 5364     		str	r3, [r2, #68]
  73:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_BIDIMODE; // rx and tx
 241              		.loc 1 73 5 is_stmt 1 view .LVU72
  73:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_BIDIMODE; // rx and tx
 242              		.loc 1 73 15 is_stmt 0 view .LVU73
 243 00fc 694B     		ldr	r3, .L9+12
 244 00fe 1A68     		ldr	r2, [r3]
 245 0100 22F04002 		bic	r2, r2, #64
 246 0104 1A60     		str	r2, [r3]
  74:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_MSTR;      // SPI master
 247              		.loc 1 74 5 is_stmt 1 view .LVU74
  74:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_MSTR;      // SPI master
 248              		.loc 1 74 15 is_stmt 0 view .LVU75
 249 0106 1A68     		ldr	r2, [r3]
 250 0108 22F40042 		bic	r2, r2, #32768
 251 010c 1A60     		str	r2, [r3]
  75:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (0x7 << 8U);       // byte transfer size
 252              		.loc 1 75 5 is_stmt 1 view .LVU76
  75:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (0x7 << 8U);       // byte transfer size
 253              		.loc 1 75 15 is_stmt 0 view .LVU77
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 12


 254 010e 1A68     		ldr	r2, [r3]
 255 0110 42F00402 		orr	r2, r2, #4
 256 0114 1A60     		str	r2, [r3]
  76:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPHA;      // high polarity
 257              		.loc 1 76 5 is_stmt 1 view .LVU78
  76:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPHA;      // high polarity
 258              		.loc 1 76 15 is_stmt 0 view .LVU79
 259 0116 5A68     		ldr	r2, [r3, #4]
 260 0118 42F4E062 		orr	r2, r2, #1792
 261 011c 5A60     		str	r2, [r3, #4]
  77:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPOL;      // 2nd edge
 262              		.loc 1 77 5 is_stmt 1 view .LVU80
  77:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_CR1_CPOL;      // 2nd edge
 263              		.loc 1 77 15 is_stmt 0 view .LVU81
 264 011e 1A68     		ldr	r2, [r3]
 265 0120 42F00102 		orr	r2, r2, #1
 266 0124 1A60     		str	r2, [r3]
  78:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSM;      // software slave management
 267              		.loc 1 78 5 is_stmt 1 view .LVU82
  78:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSM;      // software slave management
 268              		.loc 1 78 15 is_stmt 0 view .LVU83
 269 0126 1A68     		ldr	r2, [r3]
 270 0128 42F00202 		orr	r2, r2, #2
 271 012c 1A60     		str	r2, [r3]
  79:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSI;
 272              		.loc 1 79 5 is_stmt 1 view .LVU84
  79:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_SSI;
 273              		.loc 1 79 15 is_stmt 0 view .LVU85
 274 012e 1A68     		ldr	r2, [r3]
 275 0130 22F40072 		bic	r2, r2, #512
 276 0134 1A60     		str	r2, [r3]
  80:Src/drv/drv_spi1.c ****     SPI1->CR2 |= SPI_CR2_SSOE;
 277              		.loc 1 80 5 is_stmt 1 view .LVU86
  80:Src/drv/drv_spi1.c ****     SPI1->CR2 |= SPI_CR2_SSOE;
 278              		.loc 1 80 15 is_stmt 0 view .LVU87
 279 0136 1A68     		ldr	r2, [r3]
 280 0138 22F48072 		bic	r2, r2, #256
 281 013c 1A60     		str	r2, [r3]
  81:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_BR_PRESCALER_128; // BR < 1MHz for init
 282              		.loc 1 81 5 is_stmt 1 view .LVU88
  81:Src/drv/drv_spi1.c ****     SPI1->CR1 |= SPI_BR_PRESCALER_128; // BR < 1MHz for init
 283              		.loc 1 81 15 is_stmt 0 view .LVU89
 284 013e 5A68     		ldr	r2, [r3, #4]
 285 0140 42F00402 		orr	r2, r2, #4
 286 0144 5A60     		str	r2, [r3, #4]
  82:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_LSBFIRST;    // MSB first
 287              		.loc 1 82 5 is_stmt 1 view .LVU90
  82:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_LSBFIRST;    // MSB first
 288              		.loc 1 82 15 is_stmt 0 view .LVU91
 289 0146 1A68     		ldr	r2, [r3]
 290 0148 42F03002 		orr	r2, r2, #48
 291 014c 1A60     		str	r2, [r3]
  83:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_CRCEN;       // disable CRC
 292              		.loc 1 83 5 is_stmt 1 view .LVU92
  83:Src/drv/drv_spi1.c ****     SPI1->CR1 &= ~SPI_CR1_CRCEN;       // disable CRC
 293              		.loc 1 83 15 is_stmt 0 view .LVU93
 294 014e 1A68     		ldr	r2, [r3]
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 13


 295 0150 22F08002 		bic	r2, r2, #128
 296 0154 1A60     		str	r2, [r3]
  84:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (SPI_CR2_RXDMAEN |
 297              		.loc 1 84 5 is_stmt 1 view .LVU94
  84:Src/drv/drv_spi1.c ****     SPI1->CR2 |= (SPI_CR2_RXDMAEN |
 298              		.loc 1 84 15 is_stmt 0 view .LVU95
 299 0156 1A68     		ldr	r2, [r3]
 300 0158 22F40052 		bic	r2, r2, #8192
 301 015c 1A60     		str	r2, [r3]
  85:Src/drv/drv_spi1.c ****                   SPI_CR2_TXDMAEN);
 302              		.loc 1 85 5 is_stmt 1 view .LVU96
  85:Src/drv/drv_spi1.c ****                   SPI_CR2_TXDMAEN);
 303              		.loc 1 85 15 is_stmt 0 view .LVU97
 304 015e 5A68     		ldr	r2, [r3, #4]
 305 0160 42F00302 		orr	r2, r2, #3
 306 0164 5A60     		str	r2, [r3, #4]
  87:Src/drv/drv_spi1.c **** 
 307              		.loc 1 87 5 is_stmt 1 view .LVU98
  87:Src/drv/drv_spi1.c **** 
 308              		.loc 1 87 15 is_stmt 0 view .LVU99
 309 0166 5A68     		ldr	r2, [r3, #4]
 310 0168 42F48052 		orr	r2, r2, #4096
 311 016c 5A60     		str	r2, [r3, #4]
  96:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 312              		.loc 1 96 5 is_stmt 1 view .LVU100
  96:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 313              		.loc 1 96 22 is_stmt 0 view .LVU101
 314 016e 4E4A     		ldr	r2, .L9+16
 315 0170 1369     		ldr	r3, [r2, #16]
 316 0172 23F00103 		bic	r3, r3, #1
 317 0176 1361     		str	r3, [r2, #16]
  97:Src/drv/drv_spi1.c ****         ;
 318              		.loc 1 97 5 is_stmt 1 view .LVU102
 319              	.L6:
  98:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR = 0;
 320              		.loc 1 98 9 discriminator 1 view .LVU103
  97:Src/drv/drv_spi1.c ****         ;
 321              		.loc 1 97 11 discriminator 1 view .LVU104
  97:Src/drv/drv_spi1.c ****         ;
 322              		.loc 1 97 24 is_stmt 0 discriminator 1 view .LVU105
 323 0178 4B4B     		ldr	r3, .L9+16
 324 017a 1B69     		ldr	r3, [r3, #16]
  97:Src/drv/drv_spi1.c ****         ;
 325              		.loc 1 97 11 discriminator 1 view .LVU106
 326 017c 13F0010F 		tst	r3, #1
 327 0180 FAD1     		bne	.L6
  99:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 328              		.loc 1 99 5 is_stmt 1 view .LVU107
  99:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 329              		.loc 1 99 22 is_stmt 0 view .LVU108
 330 0182 494B     		ldr	r3, .L9+16
 331 0184 0022     		movs	r2, #0
 332 0186 1A61     		str	r2, [r3, #16]
 100:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = 0;
 333              		.loc 1 100 5 is_stmt 1 view .LVU109
 100:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = 0;
 334              		.loc 1 100 24 is_stmt 0 view .LVU110
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 14


 335 0188 5A61     		str	r2, [r3, #20]
 101:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 336              		.loc 1 101 5 is_stmt 1 view .LVU111
 101:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 337              		.loc 1 101 23 is_stmt 0 view .LVU112
 338 018a 9A61     		str	r2, [r3, #24]
 102:Src/drv/drv_spi1.c ****     DMA2_Stream0->M1AR = 0;
 339              		.loc 1 102 5 is_stmt 1 view .LVU113
 102:Src/drv/drv_spi1.c ****     DMA2_Stream0->M1AR = 0;
 340              		.loc 1 102 24 is_stmt 0 view .LVU114
 341 018c DA61     		str	r2, [r3, #28]
 103:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR = 0x00000021U;
 342              		.loc 1 103 5 is_stmt 1 view .LVU115
 103:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR = 0x00000021U;
 343              		.loc 1 103 24 is_stmt 0 view .LVU116
 344 018e 1A62     		str	r2, [r3, #32]
 104:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CHSEL;
 345              		.loc 1 104 5 is_stmt 1 view .LVU117
 104:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CHSEL;
 346              		.loc 1 104 23 is_stmt 0 view .LVU118
 347 0190 2122     		movs	r2, #33
 348 0192 5A62     		str	r2, [r3, #36]
 105:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0000003FU;
 349              		.loc 1 105 5 is_stmt 1 view .LVU119
 105:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0000003FU;
 350              		.loc 1 105 22 is_stmt 0 view .LVU120
 351 0194 1A69     		ldr	r2, [r3, #16]
 352 0196 22F0F052 		bic	r2, r2, #503316480
 353 019a 1A61     		str	r2, [r3, #16]
 106:Src/drv/drv_spi1.c ****     // disable DMA stream 7
 354              		.loc 1 106 5 is_stmt 1 view .LVU121
 106:Src/drv/drv_spi1.c ****     // disable DMA stream 7
 355              		.loc 1 106 17 is_stmt 0 view .LVU122
 356 019c 9A68     		ldr	r2, [r3, #8]
 357 019e 42F03F02 		orr	r2, r2, #63
 358 01a2 9A60     		str	r2, [r3, #8]
 108:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 359              		.loc 1 108 5 is_stmt 1 view .LVU123
 108:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 360              		.loc 1 108 22 is_stmt 0 view .LVU124
 361 01a4 9A6D     		ldr	r2, [r3, #88]
 362 01a6 22F00102 		bic	r2, r2, #1
 363 01aa 9A65     		str	r2, [r3, #88]
 109:Src/drv/drv_spi1.c ****         ;
 364              		.loc 1 109 5 is_stmt 1 view .LVU125
 365              	.L7:
 110:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR = 0;
 366              		.loc 1 110 9 discriminator 1 view .LVU126
 109:Src/drv/drv_spi1.c ****         ;
 367              		.loc 1 109 11 discriminator 1 view .LVU127
 109:Src/drv/drv_spi1.c ****         ;
 368              		.loc 1 109 24 is_stmt 0 discriminator 1 view .LVU128
 369 01ac 3E4B     		ldr	r3, .L9+16
 370 01ae 9B6D     		ldr	r3, [r3, #88]
 109:Src/drv/drv_spi1.c ****         ;
 371              		.loc 1 109 11 discriminator 1 view .LVU129
 372 01b0 13F0010F 		tst	r3, #1
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 15


 373 01b4 FAD1     		bne	.L7
 111:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 374              		.loc 1 111 5 is_stmt 1 view .LVU130
 111:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 375              		.loc 1 111 22 is_stmt 0 view .LVU131
 376 01b6 3C4B     		ldr	r3, .L9+16
 377 01b8 0022     		movs	r2, #0
 378 01ba 9A65     		str	r2, [r3, #88]
 112:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = 0;
 379              		.loc 1 112 5 is_stmt 1 view .LVU132
 112:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = 0;
 380              		.loc 1 112 24 is_stmt 0 view .LVU133
 381 01bc DA65     		str	r2, [r3, #92]
 113:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 382              		.loc 1 113 5 is_stmt 1 view .LVU134
 113:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 383              		.loc 1 113 23 is_stmt 0 view .LVU135
 384 01be 1A66     		str	r2, [r3, #96]
 114:Src/drv/drv_spi1.c ****     DMA2_Stream3->M1AR = 0;
 385              		.loc 1 114 5 is_stmt 1 view .LVU136
 114:Src/drv/drv_spi1.c ****     DMA2_Stream3->M1AR = 0;
 386              		.loc 1 114 24 is_stmt 0 view .LVU137
 387 01c0 5A66     		str	r2, [r3, #100]
 115:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR = 0x00000021U;
 388              		.loc 1 115 5 is_stmt 1 view .LVU138
 115:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR = 0x00000021U;
 389              		.loc 1 115 24 is_stmt 0 view .LVU139
 390 01c2 9A66     		str	r2, [r3, #104]
 116:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CHSEL;
 391              		.loc 1 116 5 is_stmt 1 view .LVU140
 116:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CHSEL;
 392              		.loc 1 116 23 is_stmt 0 view .LVU141
 393 01c4 2121     		movs	r1, #33
 394 01c6 D966     		str	r1, [r3, #108]
 117:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0F400000U;
 395              		.loc 1 117 5 is_stmt 1 view .LVU142
 117:Src/drv/drv_spi1.c ****     DMA2->LIFCR |= 0x0F400000U;
 396              		.loc 1 117 22 is_stmt 0 view .LVU143
 397 01c8 996D     		ldr	r1, [r3, #88]
 398 01ca 21F0F051 		bic	r1, r1, #503316480
 399 01ce 9965     		str	r1, [r3, #88]
 118:Src/drv/drv_spi1.c **** 
 400              		.loc 1 118 5 is_stmt 1 view .LVU144
 118:Src/drv/drv_spi1.c **** 
 401              		.loc 1 118 17 is_stmt 0 view .LVU145
 402 01d0 9968     		ldr	r1, [r3, #8]
 403 01d2 41F07461 		orr	r1, r1, #255852544
 404 01d6 9960     		str	r1, [r3, #8]
 121:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 405              		.loc 1 121 5 is_stmt 1 view .LVU146
 121:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = 0;
 406              		.loc 1 121 22 is_stmt 0 view .LVU147
 407 01d8 1969     		ldr	r1, [r3, #16]
 408 01da 41F0C061 		orr	r1, r1, #100663296
 409 01de 1961     		str	r1, [r3, #16]
 122:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_DIR;     // per to mem
 410              		.loc 1 122 5 is_stmt 1 view .LVU148
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 16


 122:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_DIR;     // per to mem
 411              		.loc 1 122 24 is_stmt 0 view .LVU149
 412 01e0 DA61     		str	r2, [r3, #28]
 123:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 413              		.loc 1 123 5 is_stmt 1 view .LVU150
 123:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 414              		.loc 1 123 22 is_stmt 0 view .LVU151
 415 01e2 1969     		ldr	r1, [r3, #16]
 416 01e4 21F0C001 		bic	r1, r1, #192
 417 01e8 1961     		str	r1, [r3, #16]
 124:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 418              		.loc 1 124 5 is_stmt 1 view .LVU152
 124:Src/drv/drv_spi1.c ****     DMA2_Stream0->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 419              		.loc 1 124 23 is_stmt 0 view .LVU153
 420 01ea 596A     		ldr	r1, [r3, #36]
 421 01ec 21F00401 		bic	r1, r1, #4
 422 01f0 5962     		str	r1, [r3, #36]
 125:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MBURST;
 423              		.loc 1 125 5 is_stmt 1 view .LVU154
 125:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MBURST;
 424              		.loc 1 125 23 is_stmt 0 view .LVU155
 425 01f2 596A     		ldr	r1, [r3, #36]
 426 01f4 21F00301 		bic	r1, r1, #3
 427 01f8 5962     		str	r1, [r3, #36]
 126:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PBURST;
 428              		.loc 1 126 5 is_stmt 1 view .LVU156
 126:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PBURST;
 429              		.loc 1 126 22 is_stmt 0 view .LVU157
 430 01fa 1969     		ldr	r1, [r3, #16]
 431 01fc 21F0C071 		bic	r1, r1, #25165824
 432 0200 1961     		str	r1, [r3, #16]
 127:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = (uint32_t)(&(SPI1->DR));
 433              		.loc 1 127 5 is_stmt 1 view .LVU158
 127:Src/drv/drv_spi1.c ****     DMA2_Stream0->PAR = (uint32_t)(&(SPI1->DR));
 434              		.loc 1 127 22 is_stmt 0 view .LVU159
 435 0202 1969     		ldr	r1, [r3, #16]
 436 0204 21F4C001 		bic	r1, r1, #6291456
 437 0208 1961     		str	r1, [r3, #16]
 128:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 438              		.loc 1 128 5 is_stmt 1 view .LVU160
 128:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 0;
 439              		.loc 1 128 23 is_stmt 0 view .LVU161
 440 020a 2848     		ldr	r0, .L9+20
 441 020c 9861     		str	r0, [r3, #24]
 129:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PINC;
 442              		.loc 1 129 5 is_stmt 1 view .LVU162
 129:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PINC;
 443              		.loc 1 129 24 is_stmt 0 view .LVU163
 444 020e 5A61     		str	r2, [r3, #20]
 130:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_MINC;
 445              		.loc 1 130 5 is_stmt 1 view .LVU164
 130:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_MINC;
 446              		.loc 1 130 22 is_stmt 0 view .LVU165
 447 0210 1969     		ldr	r1, [r3, #16]
 448 0212 21F40071 		bic	r1, r1, #512
 449 0216 1961     		str	r1, [r3, #16]
 131:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MSIZE;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 17


 450              		.loc 1 131 5 is_stmt 1 view .LVU166
 131:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_MSIZE;
 451              		.loc 1 131 22 is_stmt 0 view .LVU167
 452 0218 1969     		ldr	r1, [r3, #16]
 453 021a 41F48061 		orr	r1, r1, #1024
 454 021e 1961     		str	r1, [r3, #16]
 132:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PSIZE;
 455              		.loc 1 132 5 is_stmt 1 view .LVU168
 132:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_PSIZE;
 456              		.loc 1 132 22 is_stmt 0 view .LVU169
 457 0220 1969     		ldr	r1, [r3, #16]
 458 0222 21F4C041 		bic	r1, r1, #24576
 459 0226 1961     		str	r1, [r3, #16]
 133:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CIRC;
 460              		.loc 1 133 5 is_stmt 1 view .LVU170
 133:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR &= ~DMA_SxCR_CIRC;
 461              		.loc 1 133 22 is_stmt 0 view .LVU171
 462 0228 1969     		ldr	r1, [r3, #16]
 463 022a 21F4C051 		bic	r1, r1, #6144
 464 022e 1961     		str	r1, [r3, #16]
 134:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_PL;
 465              		.loc 1 134 5 is_stmt 1 view .LVU172
 134:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= DMA_SxCR_PL;
 466              		.loc 1 134 22 is_stmt 0 view .LVU173
 467 0230 1969     		ldr	r1, [r3, #16]
 468 0232 21F48071 		bic	r1, r1, #256
 469 0236 1961     		str	r1, [r3, #16]
 135:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 470              		.loc 1 135 5 is_stmt 1 view .LVU174
 135:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 471              		.loc 1 135 22 is_stmt 0 view .LVU175
 472 0238 1969     		ldr	r1, [r3, #16]
 473 023a 41F44031 		orr	r1, r1, #196608
 474 023e 1961     		str	r1, [r3, #16]
 137:Src/drv/drv_spi1.c ****     // TX DMA settings
 475              		.loc 1 137 5 is_stmt 1 view .LVU176
 137:Src/drv/drv_spi1.c ****     // TX DMA settings
 476              		.loc 1 137 22 is_stmt 0 view .LVU177
 477 0240 1969     		ldr	r1, [r3, #16]
 478 0242 41F01001 		orr	r1, r1, #16
 479 0246 1961     		str	r1, [r3, #16]
 139:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 480              		.loc 1 139 5 is_stmt 1 view .LVU178
 139:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = 0;
 481              		.loc 1 139 22 is_stmt 0 view .LVU179
 482 0248 996D     		ldr	r1, [r3, #88]
 483 024a 41F0C061 		orr	r1, r1, #100663296
 484 024e 9965     		str	r1, [r3, #88]
 140:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_DIR_0;    // mem to per
 485              		.loc 1 140 5 is_stmt 1 view .LVU180
 140:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_DIR_0;    // mem to per
 486              		.loc 1 140 24 is_stmt 0 view .LVU181
 487 0250 5A66     		str	r2, [r3, #100]
 141:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 488              		.loc 1 141 5 is_stmt 1 view .LVU182
 141:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_DMDIS; // fifo dis
 489              		.loc 1 141 22 is_stmt 0 view .LVU183
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 18


 490 0252 996D     		ldr	r1, [r3, #88]
 491 0254 41F04001 		orr	r1, r1, #64
 492 0258 9965     		str	r1, [r3, #88]
 142:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 493              		.loc 1 142 5 is_stmt 1 view .LVU184
 142:Src/drv/drv_spi1.c ****     DMA2_Stream3->FCR &= ~DMA_SxFCR_FTH;   // 1/4 full
 494              		.loc 1 142 23 is_stmt 0 view .LVU185
 495 025a D96E     		ldr	r1, [r3, #108]
 496 025c 21F00401 		bic	r1, r1, #4
 497 0260 D966     		str	r1, [r3, #108]
 143:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MBURST;
 498              		.loc 1 143 5 is_stmt 1 view .LVU186
 143:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MBURST;
 499              		.loc 1 143 23 is_stmt 0 view .LVU187
 500 0262 D96E     		ldr	r1, [r3, #108]
 501 0264 21F00301 		bic	r1, r1, #3
 502 0268 D966     		str	r1, [r3, #108]
 144:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PBURST;
 503              		.loc 1 144 5 is_stmt 1 view .LVU188
 144:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PBURST;
 504              		.loc 1 144 22 is_stmt 0 view .LVU189
 505 026a 996D     		ldr	r1, [r3, #88]
 506 026c 21F0C071 		bic	r1, r1, #25165824
 507 0270 9965     		str	r1, [r3, #88]
 145:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = (uint32_t)(&(SPI1->DR));
 508              		.loc 1 145 5 is_stmt 1 view .LVU190
 145:Src/drv/drv_spi1.c ****     DMA2_Stream3->PAR = (uint32_t)(&(SPI1->DR));
 509              		.loc 1 145 22 is_stmt 0 view .LVU191
 510 0272 996D     		ldr	r1, [r3, #88]
 511 0274 21F4C001 		bic	r1, r1, #6291456
 512 0278 9965     		str	r1, [r3, #88]
 146:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 513              		.loc 1 146 5 is_stmt 1 view .LVU192
 146:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 0;
 514              		.loc 1 146 23 is_stmt 0 view .LVU193
 515 027a 1866     		str	r0, [r3, #96]
 147:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PINC;
 516              		.loc 1 147 5 is_stmt 1 view .LVU194
 147:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PINC;
 517              		.loc 1 147 24 is_stmt 0 view .LVU195
 518 027c DA65     		str	r2, [r3, #92]
 148:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_MINC;
 519              		.loc 1 148 5 is_stmt 1 view .LVU196
 148:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_MINC;
 520              		.loc 1 148 22 is_stmt 0 view .LVU197
 521 027e 9A6D     		ldr	r2, [r3, #88]
 522 0280 22F40072 		bic	r2, r2, #512
 523 0284 9A65     		str	r2, [r3, #88]
 149:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MSIZE;
 524              		.loc 1 149 5 is_stmt 1 view .LVU198
 149:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_MSIZE;
 525              		.loc 1 149 22 is_stmt 0 view .LVU199
 526 0286 9A6D     		ldr	r2, [r3, #88]
 527 0288 42F48062 		orr	r2, r2, #1024
 528 028c 9A65     		str	r2, [r3, #88]
 150:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PSIZE;
 529              		.loc 1 150 5 is_stmt 1 view .LVU200
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 19


 150:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_PSIZE;
 530              		.loc 1 150 22 is_stmt 0 view .LVU201
 531 028e 9A6D     		ldr	r2, [r3, #88]
 532 0290 22F4C042 		bic	r2, r2, #24576
 533 0294 9A65     		str	r2, [r3, #88]
 534 0296 0BE0     		b	.L10
 535              	.L11:
 536              		.align	2
 537              	.L9:
 538 0298 00000000 		.word	.LC0
 539 029c 00380240 		.word	1073887232
 540 02a0 00000240 		.word	1073872896
 541 02a4 00300140 		.word	1073819648
 542 02a8 00640240 		.word	1073898496
 543 02ac 0C300140 		.word	1073819660
 544              	.L10:
 151:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CIRC;
 545              		.loc 1 151 5 is_stmt 1 view .LVU202
 151:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR &= ~DMA_SxCR_CIRC;
 546              		.loc 1 151 22 is_stmt 0 view .LVU203
 547 02b0 9A6D     		ldr	r2, [r3, #88]
 548 02b2 22F4C052 		bic	r2, r2, #6144
 549 02b6 9A65     		str	r2, [r3, #88]
 152:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_PL;
 550              		.loc 1 152 5 is_stmt 1 view .LVU204
 152:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_PL;
 551              		.loc 1 152 22 is_stmt 0 view .LVU205
 552 02b8 9A6D     		ldr	r2, [r3, #88]
 553 02ba 22F48072 		bic	r2, r2, #256
 554 02be 9A65     		str	r2, [r3, #88]
 153:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 555              		.loc 1 153 5 is_stmt 1 view .LVU206
 153:Src/drv/drv_spi1.c ****     // DMA transfer complete interrupt enable
 556              		.loc 1 153 22 is_stmt 0 view .LVU207
 557 02c0 9A6D     		ldr	r2, [r3, #88]
 558 02c2 42F44032 		orr	r2, r2, #196608
 559 02c6 9A65     		str	r2, [r3, #88]
 155:Src/drv/drv_spi1.c **** }
 560              		.loc 1 155 5 is_stmt 1 view .LVU208
 155:Src/drv/drv_spi1.c **** }
 561              		.loc 1 155 22 is_stmt 0 view .LVU209
 562 02c8 9A6D     		ldr	r2, [r3, #88]
 563 02ca 42F01002 		orr	r2, r2, #16
 564 02ce 9A65     		str	r2, [r3, #88]
 156:Src/drv/drv_spi1.c **** 
 565              		.loc 1 156 1 view .LVU210
 566 02d0 08BD     		pop	{r3, pc}
 567              		.cfi_endproc
 568              	.LFE187:
 570 02d2 00BF     		.section	.text.spi1ReadBytes,"ax",%progbits
 571              		.align	1
 572              		.global	spi1ReadBytes
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 576              		.fpu fpv5-sp-d16
 578              	spi1ReadBytes:
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 20


 579              	.LVL1:
 580              	.LFB188:
 166:Src/drv/drv_spi1.c ****     reg = reg | 0x80; // read operation
 581              		.loc 1 166 1 is_stmt 1 view -0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 8
 584              		@ frame_needed = 0, uses_anonymous_args = 0
 166:Src/drv/drv_spi1.c ****     reg = reg | 0x80; // read operation
 585              		.loc 1 166 1 is_stmt 0 view .LVU212
 586 0000 00B5     		push	{lr}
 587              		.cfi_def_cfa_offset 4
 588              		.cfi_offset 14, -4
 589 0002 83B0     		sub	sp, sp, #12
 590              		.cfi_def_cfa_offset 16
 591 0004 8DF80700 		strb	r0, [sp, #7]
 167:Src/drv/drv_spi1.c **** 
 592              		.loc 1 167 5 is_stmt 1 view .LVU213
 167:Src/drv/drv_spi1.c **** 
 593              		.loc 1 167 9 is_stmt 0 view .LVU214
 594 0008 C3B2     		uxtb	r3, r0
 595 000a 63F07F03 		orn	r3, r3, #127
 596 000e 8DF80730 		strb	r3, [sp, #7]
 169:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 597              		.loc 1 169 5 is_stmt 1 view .LVU215
 169:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 598              		.loc 1 169 22 is_stmt 0 view .LVU216
 599 0012 1A48     		ldr	r0, .L16
 600              	.LVL2:
 169:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 601              		.loc 1 169 22 view .LVU217
 602 0014 0369     		ldr	r3, [r0, #16]
 603 0016 23F00103 		bic	r3, r3, #1
 604 001a 0361     		str	r3, [r0, #16]
 170:Src/drv/drv_spi1.c ****         ;
 605              		.loc 1 170 5 is_stmt 1 view .LVU218
 606              	.L13:
 171:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 607              		.loc 1 171 9 discriminator 1 view .LVU219
 170:Src/drv/drv_spi1.c ****         ;
 608              		.loc 1 170 11 discriminator 1 view .LVU220
 170:Src/drv/drv_spi1.c ****         ;
 609              		.loc 1 170 24 is_stmt 0 discriminator 1 view .LVU221
 610 001c 174B     		ldr	r3, .L16
 611 001e 1B69     		ldr	r3, [r3, #16]
 170:Src/drv/drv_spi1.c ****         ;
 612              		.loc 1 170 11 discriminator 1 view .LVU222
 613 0020 13F0010F 		tst	r3, #1
 614 0024 FAD1     		bne	.L13
 172:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 615              		.loc 1 172 5 is_stmt 1 view .LVU223
 172:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 616              		.loc 1 172 22 is_stmt 0 view .LVU224
 617 0026 154B     		ldr	r3, .L16
 618 0028 1869     		ldr	r0, [r3, #16]
 619 002a 40F0C060 		orr	r0, r0, #100663296
 620 002e 1861     		str	r0, [r3, #16]
 173:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 21


 621              		.loc 1 173 5 is_stmt 1 view .LVU225
 173:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
 622              		.loc 1 173 24 is_stmt 0 view .LVU226
 623 0030 5A61     		str	r2, [r3, #20]
 174:Src/drv/drv_spi1.c **** 
 624              		.loc 1 174 5 is_stmt 1 view .LVU227
 174:Src/drv/drv_spi1.c **** 
 625              		.loc 1 174 24 is_stmt 0 view .LVU228
 626 0032 D961     		str	r1, [r3, #28]
 176:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 627              		.loc 1 176 5 is_stmt 1 view .LVU229
 176:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 628              		.loc 1 176 22 is_stmt 0 view .LVU230
 629 0034 996D     		ldr	r1, [r3, #88]
 630              	.LVL3:
 176:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 631              		.loc 1 176 22 view .LVU231
 632 0036 21F00101 		bic	r1, r1, #1
 633 003a 9965     		str	r1, [r3, #88]
 634              	.LVL4:
 177:Src/drv/drv_spi1.c ****         ;
 635              		.loc 1 177 5 is_stmt 1 view .LVU232
 636              	.L14:
 178:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 637              		.loc 1 178 9 discriminator 1 view .LVU233
 177:Src/drv/drv_spi1.c ****         ;
 638              		.loc 1 177 11 discriminator 1 view .LVU234
 177:Src/drv/drv_spi1.c ****         ;
 639              		.loc 1 177 24 is_stmt 0 discriminator 1 view .LVU235
 640 003c 0F4B     		ldr	r3, .L16
 641 003e 9B6D     		ldr	r3, [r3, #88]
 177:Src/drv/drv_spi1.c ****         ;
 642              		.loc 1 177 11 discriminator 1 view .LVU236
 643 0040 13F0010F 		tst	r3, #1
 644 0044 FAD1     		bne	.L14
 179:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 645              		.loc 1 179 5 is_stmt 1 view .LVU237
 179:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 646              		.loc 1 179 22 is_stmt 0 view .LVU238
 647 0046 0D4B     		ldr	r3, .L16
 648 0048 996D     		ldr	r1, [r3, #88]
 649 004a 41F0C061 		orr	r1, r1, #100663296
 650 004e 9965     		str	r1, [r3, #88]
 180:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 651              		.loc 1 180 5 is_stmt 1 view .LVU239
 180:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 652              		.loc 1 180 24 is_stmt 0 view .LVU240
 653 0050 DA65     		str	r2, [r3, #92]
 181:Src/drv/drv_spi1.c **** 
 654              		.loc 1 181 5 is_stmt 1 view .LVU241
 181:Src/drv/drv_spi1.c **** 
 655              		.loc 1 181 26 is_stmt 0 view .LVU242
 656 0052 0DF10702 		add	r2, sp, #7
 657              	.LVL5:
 181:Src/drv/drv_spi1.c **** 
 658              		.loc 1 181 24 view .LVU243
 659 0056 5A66     		str	r2, [r3, #100]
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 22


 183:Src/drv/drv_spi1.c **** 
 660              		.loc 1 183 5 is_stmt 1 view .LVU244
 183:Src/drv/drv_spi1.c **** 
 661              		.loc 1 183 15 is_stmt 0 view .LVU245
 662 0058 0949     		ldr	r1, .L16+4
 663 005a 0A68     		ldr	r2, [r1]
 664 005c 42F04002 		orr	r2, r2, #64
 665 0060 0A60     		str	r2, [r1]
 185:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 666              		.loc 1 185 5 is_stmt 1 view .LVU246
 185:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 667              		.loc 1 185 22 is_stmt 0 view .LVU247
 668 0062 1A69     		ldr	r2, [r3, #16]
 669 0064 42F00102 		orr	r2, r2, #1
 670 0068 1A61     		str	r2, [r3, #16]
 186:Src/drv/drv_spi1.c **** 
 671              		.loc 1 186 5 is_stmt 1 view .LVU248
 186:Src/drv/drv_spi1.c **** 
 672              		.loc 1 186 22 is_stmt 0 view .LVU249
 673 006a 9A6D     		ldr	r2, [r3, #88]
 674 006c 42F00102 		orr	r2, r2, #1
 675 0070 9A65     		str	r2, [r3, #88]
 188:Src/drv/drv_spi1.c **** }
 676              		.loc 1 188 5 is_stmt 1 view .LVU250
 677 0072 FFF7FEFF 		bl	transferCompleteCallback
 678              	.LVL6:
 189:Src/drv/drv_spi1.c **** 
 679              		.loc 1 189 1 is_stmt 0 view .LVU251
 680 0076 03B0     		add	sp, sp, #12
 681              		.cfi_def_cfa_offset 4
 682              		@ sp needed
 683 0078 5DF804FB 		ldr	pc, [sp], #4
 684              	.L17:
 685              		.align	2
 686              	.L16:
 687 007c 00640240 		.word	1073898496
 688 0080 00300140 		.word	1073819648
 689              		.cfi_endproc
 690              	.LFE188:
 692              		.section	.text.spi1WriteBytes,"ax",%progbits
 693              		.align	1
 694              		.global	spi1WriteBytes
 695              		.syntax unified
 696              		.thumb
 697              		.thumb_func
 698              		.fpu fpv5-sp-d16
 700              	spi1WriteBytes:
 701              	.LVL7:
 702              	.LFB189:
 199:Src/drv/drv_spi1.c ****     // RX Setup
 703              		.loc 1 199 1 is_stmt 1 view -0
 704              		.cfi_startproc
 705              		@ args = 0, pretend = 0, frame = 0
 706              		@ frame_needed = 0, uses_anonymous_args = 0
 199:Src/drv/drv_spi1.c ****     // RX Setup
 707              		.loc 1 199 1 is_stmt 0 view .LVU253
 708 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 23


 709              		.cfi_def_cfa_offset 8
 710              		.cfi_offset 3, -8
 711              		.cfi_offset 14, -4
 201:Src/drv/drv_spi1.c **** 
 712              		.loc 1 201 5 is_stmt 1 view .LVU254
 203:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 713              		.loc 1 203 5 view .LVU255
 203:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 714              		.loc 1 203 22 is_stmt 0 view .LVU256
 715 0002 1B4A     		ldr	r2, .L22
 716 0004 1369     		ldr	r3, [r2, #16]
 717 0006 23F00103 		bic	r3, r3, #1
 718 000a 1361     		str	r3, [r2, #16]
 204:Src/drv/drv_spi1.c ****         ;
 719              		.loc 1 204 5 is_stmt 1 view .LVU257
 720              	.L19:
 205:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 721              		.loc 1 205 9 discriminator 1 view .LVU258
 204:Src/drv/drv_spi1.c ****         ;
 722              		.loc 1 204 11 discriminator 1 view .LVU259
 204:Src/drv/drv_spi1.c ****         ;
 723              		.loc 1 204 24 is_stmt 0 discriminator 1 view .LVU260
 724 000c 184B     		ldr	r3, .L22
 725 000e 1B69     		ldr	r3, [r3, #16]
 204:Src/drv/drv_spi1.c ****         ;
 726              		.loc 1 204 11 discriminator 1 view .LVU261
 727 0010 13F0010F 		tst	r3, #1
 728 0014 FAD1     		bne	.L19
 206:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 729              		.loc 1 206 5 is_stmt 1 view .LVU262
 206:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = size;
 730              		.loc 1 206 22 is_stmt 0 view .LVU263
 731 0016 164B     		ldr	r3, .L22
 732 0018 1A69     		ldr	r2, [r3, #16]
 733 001a 42F0C062 		orr	r2, r2, #100663296
 734 001e 1A61     		str	r2, [r3, #16]
 207:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 735              		.loc 1 207 5 is_stmt 1 view .LVU264
 207:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 736              		.loc 1 207 24 is_stmt 0 view .LVU265
 737 0020 5961     		str	r1, [r3, #20]
 208:Src/drv/drv_spi1.c ****     // TX Setup
 738              		.loc 1 208 5 is_stmt 1 view .LVU266
 208:Src/drv/drv_spi1.c ****     // TX Setup
 739              		.loc 1 208 26 is_stmt 0 view .LVU267
 740 0022 144A     		ldr	r2, .L22+4
 208:Src/drv/drv_spi1.c ****     // TX Setup
 741              		.loc 1 208 24 view .LVU268
 742 0024 DA61     		str	r2, [r3, #28]
 211:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 743              		.loc 1 211 5 is_stmt 1 view .LVU269
 211:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 744              		.loc 1 211 22 is_stmt 0 view .LVU270
 745 0026 9A6D     		ldr	r2, [r3, #88]
 746 0028 22F00102 		bic	r2, r2, #1
 747 002c 9A65     		str	r2, [r3, #88]
 212:Src/drv/drv_spi1.c ****         ;
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 24


 748              		.loc 1 212 5 is_stmt 1 view .LVU271
 749              	.L20:
 213:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 750              		.loc 1 213 9 discriminator 1 view .LVU272
 212:Src/drv/drv_spi1.c ****         ;
 751              		.loc 1 212 11 discriminator 1 view .LVU273
 212:Src/drv/drv_spi1.c ****         ;
 752              		.loc 1 212 24 is_stmt 0 discriminator 1 view .LVU274
 753 002e 104B     		ldr	r3, .L22
 754 0030 9B6D     		ldr	r3, [r3, #88]
 212:Src/drv/drv_spi1.c ****         ;
 755              		.loc 1 212 11 discriminator 1 view .LVU275
 756 0032 13F0010F 		tst	r3, #1
 757 0036 FAD1     		bne	.L20
 214:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 758              		.loc 1 214 5 is_stmt 1 view .LVU276
 214:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = size;
 759              		.loc 1 214 22 is_stmt 0 view .LVU277
 760 0038 0D4B     		ldr	r3, .L22
 761 003a 9A6D     		ldr	r2, [r3, #88]
 762 003c 42F0C062 		orr	r2, r2, #100663296
 763 0040 9A65     		str	r2, [r3, #88]
 215:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)pData;
 764              		.loc 1 215 5 is_stmt 1 view .LVU278
 215:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)pData;
 765              		.loc 1 215 24 is_stmt 0 view .LVU279
 766 0042 D965     		str	r1, [r3, #92]
 216:Src/drv/drv_spi1.c **** 
 767              		.loc 1 216 5 is_stmt 1 view .LVU280
 216:Src/drv/drv_spi1.c **** 
 768              		.loc 1 216 24 is_stmt 0 view .LVU281
 769 0044 5866     		str	r0, [r3, #100]
 218:Src/drv/drv_spi1.c **** 
 770              		.loc 1 218 5 is_stmt 1 view .LVU282
 218:Src/drv/drv_spi1.c **** 
 771              		.loc 1 218 22 is_stmt 0 view .LVU283
 772 0046 9A6D     		ldr	r2, [r3, #88]
 773 0048 42F01002 		orr	r2, r2, #16
 774 004c 9A65     		str	r2, [r3, #88]
 220:Src/drv/drv_spi1.c **** 
 775              		.loc 1 220 5 is_stmt 1 view .LVU284
 220:Src/drv/drv_spi1.c **** 
 776              		.loc 1 220 15 is_stmt 0 view .LVU285
 777 004e 0A49     		ldr	r1, .L22+8
 778              	.LVL8:
 220:Src/drv/drv_spi1.c **** 
 779              		.loc 1 220 15 view .LVU286
 780 0050 0A68     		ldr	r2, [r1]
 781 0052 42F04002 		orr	r2, r2, #64
 782 0056 0A60     		str	r2, [r1]
 222:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 783              		.loc 1 222 5 is_stmt 1 view .LVU287
 222:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 784              		.loc 1 222 22 is_stmt 0 view .LVU288
 785 0058 1A69     		ldr	r2, [r3, #16]
 786 005a 42F00102 		orr	r2, r2, #1
 787 005e 1A61     		str	r2, [r3, #16]
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 25


 223:Src/drv/drv_spi1.c **** 
 788              		.loc 1 223 5 is_stmt 1 view .LVU289
 223:Src/drv/drv_spi1.c **** 
 789              		.loc 1 223 22 is_stmt 0 view .LVU290
 790 0060 9A6D     		ldr	r2, [r3, #88]
 791 0062 42F00102 		orr	r2, r2, #1
 792 0066 9A65     		str	r2, [r3, #88]
 225:Src/drv/drv_spi1.c **** }
 793              		.loc 1 225 5 is_stmt 1 view .LVU291
 794 0068 FFF7FEFF 		bl	transferCompleteCallback
 795              	.LVL9:
 226:Src/drv/drv_spi1.c **** 
 796              		.loc 1 226 1 is_stmt 0 view .LVU292
 797 006c 08BD     		pop	{r3, pc}
 798              	.L23:
 799 006e 00BF     		.align	2
 800              	.L22:
 801 0070 00640240 		.word	1073898496
 802 0074 00000000 		.word	.LANCHOR1
 803 0078 00300140 		.word	1073819648
 804              		.cfi_endproc
 805              	.LFE189:
 807              		.section	.text.spi1ReadOneByte,"ax",%progbits
 808              		.align	1
 809              		.global	spi1ReadOneByte
 810              		.syntax unified
 811              		.thumb
 812              		.thumb_func
 813              		.fpu fpv5-sp-d16
 815              	spi1ReadOneByte:
 816              	.LVL10:
 817              	.LFB190:
 235:Src/drv/drv_spi1.c ****     reg |= 0x80; // read operation
 818              		.loc 1 235 1 is_stmt 1 view -0
 819              		.cfi_startproc
 820              		@ args = 0, pretend = 0, frame = 8
 821              		@ frame_needed = 0, uses_anonymous_args = 0
 235:Src/drv/drv_spi1.c ****     reg |= 0x80; // read operation
 822              		.loc 1 235 1 is_stmt 0 view .LVU294
 823 0000 00B5     		push	{lr}
 824              		.cfi_def_cfa_offset 4
 825              		.cfi_offset 14, -4
 826 0002 83B0     		sub	sp, sp, #12
 827              		.cfi_def_cfa_offset 16
 828 0004 8DF80700 		strb	r0, [sp, #7]
 236:Src/drv/drv_spi1.c **** 
 829              		.loc 1 236 5 is_stmt 1 view .LVU295
 236:Src/drv/drv_spi1.c **** 
 830              		.loc 1 236 9 is_stmt 0 view .LVU296
 831 0008 C3B2     		uxtb	r3, r0
 832 000a 63F07F03 		orn	r3, r3, #127
 833 000e 8DF80730 		strb	r3, [sp, #7]
 238:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 834              		.loc 1 238 5 is_stmt 1 view .LVU297
 238:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 835              		.loc 1 238 22 is_stmt 0 view .LVU298
 836 0012 1B4A     		ldr	r2, .L28
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 26


 837 0014 1369     		ldr	r3, [r2, #16]
 838 0016 23F00103 		bic	r3, r3, #1
 839 001a 1361     		str	r3, [r2, #16]
 239:Src/drv/drv_spi1.c ****         ;
 840              		.loc 1 239 5 is_stmt 1 view .LVU299
 841              	.L25:
 240:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 842              		.loc 1 240 9 discriminator 1 view .LVU300
 239:Src/drv/drv_spi1.c ****         ;
 843              		.loc 1 239 11 discriminator 1 view .LVU301
 239:Src/drv/drv_spi1.c ****         ;
 844              		.loc 1 239 24 is_stmt 0 discriminator 1 view .LVU302
 845 001c 184B     		ldr	r3, .L28
 846 001e 1B69     		ldr	r3, [r3, #16]
 239:Src/drv/drv_spi1.c ****         ;
 847              		.loc 1 239 11 discriminator 1 view .LVU303
 848 0020 13F0010F 		tst	r3, #1
 849 0024 FAD1     		bne	.L25
 241:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 850              		.loc 1 241 5 is_stmt 1 view .LVU304
 241:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 851              		.loc 1 241 22 is_stmt 0 view .LVU305
 852 0026 164B     		ldr	r3, .L28
 853 0028 1A69     		ldr	r2, [r3, #16]
 854 002a 42F0C062 		orr	r2, r2, #100663296
 855 002e 1A61     		str	r2, [r3, #16]
 242:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
 856              		.loc 1 242 5 is_stmt 1 view .LVU306
 242:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)pData;
 857              		.loc 1 242 24 is_stmt 0 view .LVU307
 858 0030 0222     		movs	r2, #2
 859 0032 5A61     		str	r2, [r3, #20]
 243:Src/drv/drv_spi1.c **** 
 860              		.loc 1 243 5 is_stmt 1 view .LVU308
 243:Src/drv/drv_spi1.c **** 
 861              		.loc 1 243 24 is_stmt 0 view .LVU309
 862 0034 D961     		str	r1, [r3, #28]
 245:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 863              		.loc 1 245 5 is_stmt 1 view .LVU310
 245:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 864              		.loc 1 245 22 is_stmt 0 view .LVU311
 865 0036 9A6D     		ldr	r2, [r3, #88]
 866 0038 22F00102 		bic	r2, r2, #1
 867 003c 9A65     		str	r2, [r3, #88]
 246:Src/drv/drv_spi1.c ****         ;
 868              		.loc 1 246 5 is_stmt 1 view .LVU312
 869              	.L26:
 247:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 870              		.loc 1 247 9 discriminator 1 view .LVU313
 246:Src/drv/drv_spi1.c ****         ;
 871              		.loc 1 246 11 discriminator 1 view .LVU314
 246:Src/drv/drv_spi1.c ****         ;
 872              		.loc 1 246 24 is_stmt 0 discriminator 1 view .LVU315
 873 003e 104B     		ldr	r3, .L28
 874 0040 9B6D     		ldr	r3, [r3, #88]
 246:Src/drv/drv_spi1.c ****         ;
 875              		.loc 1 246 11 discriminator 1 view .LVU316
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 27


 876 0042 13F0010F 		tst	r3, #1
 877 0046 FAD1     		bne	.L26
 248:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 878              		.loc 1 248 5 is_stmt 1 view .LVU317
 248:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 879              		.loc 1 248 22 is_stmt 0 view .LVU318
 880 0048 0D4B     		ldr	r3, .L28
 881 004a 9A6D     		ldr	r2, [r3, #88]
 882 004c 42F0C062 		orr	r2, r2, #100663296
 883 0050 9A65     		str	r2, [r3, #88]
 249:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 884              		.loc 1 249 5 is_stmt 1 view .LVU319
 249:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)&reg;
 885              		.loc 1 249 24 is_stmt 0 view .LVU320
 886 0052 0222     		movs	r2, #2
 887 0054 DA65     		str	r2, [r3, #92]
 250:Src/drv/drv_spi1.c **** 
 888              		.loc 1 250 5 is_stmt 1 view .LVU321
 250:Src/drv/drv_spi1.c **** 
 889              		.loc 1 250 26 is_stmt 0 view .LVU322
 890 0056 0DF10702 		add	r2, sp, #7
 250:Src/drv/drv_spi1.c **** 
 891              		.loc 1 250 24 view .LVU323
 892 005a 5A66     		str	r2, [r3, #100]
 252:Src/drv/drv_spi1.c **** 
 893              		.loc 1 252 5 is_stmt 1 view .LVU324
 252:Src/drv/drv_spi1.c **** 
 894              		.loc 1 252 15 is_stmt 0 view .LVU325
 895 005c 0949     		ldr	r1, .L28+4
 896              	.LVL11:
 252:Src/drv/drv_spi1.c **** 
 897              		.loc 1 252 15 view .LVU326
 898 005e 0A68     		ldr	r2, [r1]
 899 0060 42F04002 		orr	r2, r2, #64
 900 0064 0A60     		str	r2, [r1]
 254:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 901              		.loc 1 254 5 is_stmt 1 view .LVU327
 254:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 902              		.loc 1 254 22 is_stmt 0 view .LVU328
 903 0066 1A69     		ldr	r2, [r3, #16]
 904 0068 42F00102 		orr	r2, r2, #1
 905 006c 1A61     		str	r2, [r3, #16]
 255:Src/drv/drv_spi1.c **** 
 906              		.loc 1 255 5 is_stmt 1 view .LVU329
 255:Src/drv/drv_spi1.c **** 
 907              		.loc 1 255 22 is_stmt 0 view .LVU330
 908 006e 9A6D     		ldr	r2, [r3, #88]
 909 0070 42F00102 		orr	r2, r2, #1
 910 0074 9A65     		str	r2, [r3, #88]
 257:Src/drv/drv_spi1.c **** }
 911              		.loc 1 257 5 is_stmt 1 view .LVU331
 912 0076 FFF7FEFF 		bl	transferCompleteCallback
 913              	.LVL12:
 258:Src/drv/drv_spi1.c **** 
 914              		.loc 1 258 1 is_stmt 0 view .LVU332
 915 007a 03B0     		add	sp, sp, #12
 916              		.cfi_def_cfa_offset 4
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 28


 917              		@ sp needed
 918 007c 5DF804FB 		ldr	pc, [sp], #4
 919              	.L29:
 920              		.align	2
 921              	.L28:
 922 0080 00640240 		.word	1073898496
 923 0084 00300140 		.word	1073819648
 924              		.cfi_endproc
 925              	.LFE190:
 927              		.section	.text.spi1WriteOneByte,"ax",%progbits
 928              		.align	1
 929              		.global	spi1WriteOneByte
 930              		.syntax unified
 931              		.thumb
 932              		.thumb_func
 933              		.fpu fpv5-sp-d16
 935              	spi1WriteOneByte:
 936              	.LVL13:
 937              	.LFB191:
 267:Src/drv/drv_spi1.c ****     // need to pass in array of values to be written
 938              		.loc 1 267 1 is_stmt 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 8
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 267:Src/drv/drv_spi1.c ****     // need to pass in array of values to be written
 942              		.loc 1 267 1 is_stmt 0 view .LVU334
 943 0000 00B5     		push	{lr}
 944              		.cfi_def_cfa_offset 4
 945              		.cfi_offset 14, -4
 946 0002 83B0     		sub	sp, sp, #12
 947              		.cfi_def_cfa_offset 16
 270:Src/drv/drv_spi1.c ****     uint8_t temp[2] = {reg, data};
 948              		.loc 1 270 5 is_stmt 1 view .LVU335
 271:Src/drv/drv_spi1.c **** 
 949              		.loc 1 271 5 view .LVU336
 271:Src/drv/drv_spi1.c **** 
 950              		.loc 1 271 13 is_stmt 0 view .LVU337
 951 0004 8DF80400 		strb	r0, [sp, #4]
 952 0008 8DF80510 		strb	r1, [sp, #5]
 273:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 953              		.loc 1 273 5 is_stmt 1 view .LVU338
 273:Src/drv/drv_spi1.c ****     while (DMA2_Stream0->CR & DMA_SxCR_EN)
 954              		.loc 1 273 22 is_stmt 0 view .LVU339
 955 000c 1B4A     		ldr	r2, .L34
 956 000e 1369     		ldr	r3, [r2, #16]
 957 0010 23F00103 		bic	r3, r3, #1
 958 0014 1361     		str	r3, [r2, #16]
 274:Src/drv/drv_spi1.c ****         ;
 959              		.loc 1 274 5 is_stmt 1 view .LVU340
 960              	.L31:
 275:Src/drv/drv_spi1.c ****     DMA2_Stream0->CR |= (0x3 << 25U);
 961              		.loc 1 275 9 discriminator 1 view .LVU341
 274:Src/drv/drv_spi1.c ****         ;
 962              		.loc 1 274 11 discriminator 1 view .LVU342
 274:Src/drv/drv_spi1.c ****         ;
 963              		.loc 1 274 24 is_stmt 0 discriminator 1 view .LVU343
 964 0016 194B     		ldr	r3, .L34
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 29


 965 0018 1B69     		ldr	r3, [r3, #16]
 274:Src/drv/drv_spi1.c ****         ;
 966              		.loc 1 274 11 discriminator 1 view .LVU344
 967 001a 13F0010F 		tst	r3, #1
 968 001e FAD1     		bne	.L31
 276:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 969              		.loc 1 276 5 is_stmt 1 view .LVU345
 276:Src/drv/drv_spi1.c ****     DMA2_Stream0->NDTR = 2;
 970              		.loc 1 276 22 is_stmt 0 view .LVU346
 971 0020 164B     		ldr	r3, .L34
 972 0022 1A69     		ldr	r2, [r3, #16]
 973 0024 42F0C062 		orr	r2, r2, #100663296
 974 0028 1A61     		str	r2, [r3, #16]
 277:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 975              		.loc 1 277 5 is_stmt 1 view .LVU347
 277:Src/drv/drv_spi1.c ****     DMA2_Stream0->M0AR = (uint32_t)&dummy;
 976              		.loc 1 277 24 is_stmt 0 view .LVU348
 977 002a 0222     		movs	r2, #2
 978 002c 5A61     		str	r2, [r3, #20]
 278:Src/drv/drv_spi1.c ****     // TX Setup
 979              		.loc 1 278 5 is_stmt 1 view .LVU349
 278:Src/drv/drv_spi1.c ****     // TX Setup
 980              		.loc 1 278 26 is_stmt 0 view .LVU350
 981 002e 144A     		ldr	r2, .L34+4
 278:Src/drv/drv_spi1.c ****     // TX Setup
 982              		.loc 1 278 24 view .LVU351
 983 0030 DA61     		str	r2, [r3, #28]
 281:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 984              		.loc 1 281 5 is_stmt 1 view .LVU352
 281:Src/drv/drv_spi1.c ****     while (DMA2_Stream3->CR & DMA_SxCR_EN)
 985              		.loc 1 281 22 is_stmt 0 view .LVU353
 986 0032 9A6D     		ldr	r2, [r3, #88]
 987 0034 22F00102 		bic	r2, r2, #1
 988 0038 9A65     		str	r2, [r3, #88]
 282:Src/drv/drv_spi1.c ****         ;
 989              		.loc 1 282 5 is_stmt 1 view .LVU354
 990              	.L32:
 283:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= (0x3 << 25U);
 991              		.loc 1 283 9 discriminator 1 view .LVU355
 282:Src/drv/drv_spi1.c ****         ;
 992              		.loc 1 282 11 discriminator 1 view .LVU356
 282:Src/drv/drv_spi1.c ****         ;
 993              		.loc 1 282 24 is_stmt 0 discriminator 1 view .LVU357
 994 003a 104B     		ldr	r3, .L34
 995 003c 9B6D     		ldr	r3, [r3, #88]
 282:Src/drv/drv_spi1.c ****         ;
 996              		.loc 1 282 11 discriminator 1 view .LVU358
 997 003e 13F0010F 		tst	r3, #1
 998 0042 FAD1     		bne	.L32
 284:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 999              		.loc 1 284 5 is_stmt 1 view .LVU359
 284:Src/drv/drv_spi1.c ****     DMA2_Stream3->NDTR = 2;
 1000              		.loc 1 284 22 is_stmt 0 view .LVU360
 1001 0044 0D4B     		ldr	r3, .L34
 1002 0046 9A6D     		ldr	r2, [r3, #88]
 1003 0048 42F0C062 		orr	r2, r2, #100663296
 1004 004c 9A65     		str	r2, [r3, #88]
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 30


 285:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)temp;
 1005              		.loc 1 285 5 is_stmt 1 view .LVU361
 285:Src/drv/drv_spi1.c ****     DMA2_Stream3->M0AR = (uint32_t)temp;
 1006              		.loc 1 285 24 is_stmt 0 view .LVU362
 1007 004e 0222     		movs	r2, #2
 1008 0050 DA65     		str	r2, [r3, #92]
 286:Src/drv/drv_spi1.c **** 
 1009              		.loc 1 286 5 is_stmt 1 view .LVU363
 286:Src/drv/drv_spi1.c **** 
 1010              		.loc 1 286 26 is_stmt 0 view .LVU364
 1011 0052 01AA     		add	r2, sp, #4
 286:Src/drv/drv_spi1.c **** 
 1012              		.loc 1 286 24 view .LVU365
 1013 0054 5A66     		str	r2, [r3, #100]
 288:Src/drv/drv_spi1.c **** 
 1014              		.loc 1 288 5 is_stmt 1 view .LVU366
 288:Src/drv/drv_spi1.c **** 
 1015              		.loc 1 288 15 is_stmt 0 view .LVU367
 1016 0056 0B49     		ldr	r1, .L34+8
 1017              	.LVL14:
 288:Src/drv/drv_spi1.c **** 
 1018              		.loc 1 288 15 view .LVU368
 1019 0058 0A68     		ldr	r2, [r1]
 1020 005a 42F04002 		orr	r2, r2, #64
 1021 005e 0A60     		str	r2, [r1]
 290:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 1022              		.loc 1 290 5 is_stmt 1 view .LVU369
 290:Src/drv/drv_spi1.c ****     DMA2_Stream3->CR |= DMA_SxCR_EN;
 1023              		.loc 1 290 22 is_stmt 0 view .LVU370
 1024 0060 1A69     		ldr	r2, [r3, #16]
 1025 0062 42F00102 		orr	r2, r2, #1
 1026 0066 1A61     		str	r2, [r3, #16]
 291:Src/drv/drv_spi1.c **** 
 1027              		.loc 1 291 5 is_stmt 1 view .LVU371
 291:Src/drv/drv_spi1.c **** 
 1028              		.loc 1 291 22 is_stmt 0 view .LVU372
 1029 0068 9A6D     		ldr	r2, [r3, #88]
 1030 006a 42F00102 		orr	r2, r2, #1
 1031 006e 9A65     		str	r2, [r3, #88]
 293:Src/drv/drv_spi1.c **** }
 1032              		.loc 1 293 5 is_stmt 1 view .LVU373
 1033 0070 FFF7FEFF 		bl	transferCompleteCallback
 1034              	.LVL15:
 294:Src/drv/drv_spi1.c **** 
 1035              		.loc 1 294 1 is_stmt 0 view .LVU374
 1036 0074 03B0     		add	sp, sp, #12
 1037              		.cfi_def_cfa_offset 4
 1038              		@ sp needed
 1039 0076 5DF804FB 		ldr	pc, [sp], #4
 1040              	.L35:
 1041 007a 00BF     		.align	2
 1042              	.L34:
 1043 007c 00640240 		.word	1073898496
 1044 0080 00000000 		.word	.LANCHOR2
 1045 0084 00300140 		.word	1073819648
 1046              		.cfi_endproc
 1047              	.LFE191:
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 31


 1049              		.section	.text.DMA2_Stream0_IRQHandler,"ax",%progbits
 1050              		.align	1
 1051              		.global	DMA2_Stream0_IRQHandler
 1052              		.syntax unified
 1053              		.thumb
 1054              		.thumb_func
 1055              		.fpu fpv5-sp-d16
 1057              	DMA2_Stream0_IRQHandler:
 1058              	.LFB193:
 303:Src/drv/drv_spi1.c **** 
 304:Src/drv/drv_spi1.c **** /* Interrupt Handlers */
 305:Src/drv/drv_spi1.c **** 
 306:Src/drv/drv_spi1.c **** /**
 307:Src/drv/drv_spi1.c ****  * @brief This function handles DMA2 stream1 global interrupt.
 308:Src/drv/drv_spi1.c ****  */
 309:Src/drv/drv_spi1.c **** void DMA2_Stream0_IRQHandler(void)
 310:Src/drv/drv_spi1.c **** {
 1059              		.loc 1 310 1 is_stmt 1 view -0
 1060              		.cfi_startproc
 1061              		@ args = 0, pretend = 0, frame = 0
 1062              		@ frame_needed = 0, uses_anonymous_args = 0
 1063              		@ link register save eliminated.
 311:Src/drv/drv_spi1.c ****     if (DMA2->LISR & DMA_LISR_TCIF0)
 1064              		.loc 1 311 5 view .LVU376
 1065              		.loc 1 311 13 is_stmt 0 view .LVU377
 1066 0000 064B     		ldr	r3, .L38
 1067 0002 1B68     		ldr	r3, [r3]
 1068              		.loc 1 311 8 view .LVU378
 1069 0004 13F0200F 		tst	r3, #32
 1070 0008 07D0     		beq	.L36
 312:Src/drv/drv_spi1.c ****     {
 313:Src/drv/drv_spi1.c ****         DMA2->LIFCR |= DMA_LIFCR_CTCIF0;
 1071              		.loc 1 313 9 is_stmt 1 view .LVU379
 1072              		.loc 1 313 21 is_stmt 0 view .LVU380
 1073 000a 044A     		ldr	r2, .L38
 1074 000c 9368     		ldr	r3, [r2, #8]
 1075 000e 43F02003 		orr	r3, r3, #32
 1076 0012 9360     		str	r3, [r2, #8]
 314:Src/drv/drv_spi1.c ****         transferComplete = true;
 1077              		.loc 1 314 9 is_stmt 1 view .LVU381
 1078              		.loc 1 314 26 is_stmt 0 view .LVU382
 1079 0014 024B     		ldr	r3, .L38+4
 1080 0016 0122     		movs	r2, #1
 1081 0018 1A70     		strb	r2, [r3]
 1082              	.L36:
 315:Src/drv/drv_spi1.c ****     }
 316:Src/drv/drv_spi1.c **** }
 1083              		.loc 1 316 1 view .LVU383
 1084 001a 7047     		bx	lr
 1085              	.L39:
 1086              		.align	2
 1087              	.L38:
 1088 001c 00640240 		.word	1073898496
 1089 0020 00000000 		.word	.LANCHOR0
 1090              		.cfi_endproc
 1091              	.LFE193:
 1093              		.section	.text.DMA2_Stream3_IRQHandler,"ax",%progbits
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 32


 1094              		.align	1
 1095              		.global	DMA2_Stream3_IRQHandler
 1096              		.syntax unified
 1097              		.thumb
 1098              		.thumb_func
 1099              		.fpu fpv5-sp-d16
 1101              	DMA2_Stream3_IRQHandler:
 1102              	.LFB194:
 317:Src/drv/drv_spi1.c **** 
 318:Src/drv/drv_spi1.c **** /**
 319:Src/drv/drv_spi1.c ****  * @brief This function handles DMA2 stream3 global interrupt.
 320:Src/drv/drv_spi1.c ****  */
 321:Src/drv/drv_spi1.c **** void DMA2_Stream3_IRQHandler(void)
 322:Src/drv/drv_spi1.c **** {
 1103              		.loc 1 322 1 is_stmt 1 view -0
 1104              		.cfi_startproc
 1105              		@ args = 0, pretend = 0, frame = 0
 1106              		@ frame_needed = 0, uses_anonymous_args = 0
 1107              		@ link register save eliminated.
 323:Src/drv/drv_spi1.c ****     if (DMA2->LISR & DMA_LISR_TCIF3)
 1108              		.loc 1 323 5 view .LVU385
 1109              		.loc 1 323 13 is_stmt 0 view .LVU386
 1110 0000 054B     		ldr	r3, .L42
 1111 0002 1B68     		ldr	r3, [r3]
 1112              		.loc 1 323 8 view .LVU387
 1113 0004 13F0006F 		tst	r3, #134217728
 1114 0008 04D0     		beq	.L40
 324:Src/drv/drv_spi1.c ****     {
 325:Src/drv/drv_spi1.c ****         DMA2->LIFCR |= DMA_LIFCR_CTCIF3;
 1115              		.loc 1 325 9 is_stmt 1 view .LVU388
 1116              		.loc 1 325 21 is_stmt 0 view .LVU389
 1117 000a 034A     		ldr	r2, .L42
 1118 000c 9368     		ldr	r3, [r2, #8]
 1119 000e 43F00063 		orr	r3, r3, #134217728
 1120 0012 9360     		str	r3, [r2, #8]
 1121              	.L40:
 326:Src/drv/drv_spi1.c ****     }
 327:Src/drv/drv_spi1.c **** }...
 1122              		.loc 1 327 1 view .LVU390
 1123 0014 7047     		bx	lr
 1124              	.L43:
 1125 0016 00BF     		.align	2
 1126              	.L42:
 1127 0018 00640240 		.word	1073898496
 1128              		.cfi_endproc
 1129              	.LFE194:
 1131              		.global	transferComplete
 1132              		.section	.bss.dummy.0,"aw",%nobits
 1133              		.set	.LANCHOR2,. + 0
 1136              	dummy.0:
 1137 0000 00       		.space	1
 1138              		.section	.bss.dummy.1,"aw",%nobits
 1139              		.set	.LANCHOR1,. + 0
 1142              	dummy.1:
 1143 0000 00       		.space	1
 1144              		.section	.bss.transferComplete,"aw",%nobits
 1145              		.set	.LANCHOR0,. + 0
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 33


 1148              	transferComplete:
 1149 0000 00       		.space	1
 1150              		.text
 1151              	.Letext0:
 1152              		.file 2 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/machine/_de
 1153              		.file 3 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_stdint
 1154              		.file 4 "Libraries/CMSIS/Device/ST/STM32F7xx/Include/stm32f722xx.h"
 1155              		.file 5 "<built-in>"
ARM GAS  /var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s 			page 34


DEFINED SYMBOLS
                            *ABS*:0000000000000000 drv_spi1.c
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:18     .text.transferCompleteCallback:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:25     .text.transferCompleteCallback:0000000000000000 transferCompleteCallback
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:58     .text.transferCompleteCallback:000000000000001c $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:64     .rodata.spi1Init.str1.4:0000000000000000 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:68     .text.spi1Init:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:75     .text.spi1Init:0000000000000000 spi1Init
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:538    .text.spi1Init:0000000000000298 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:547    .text.spi1Init:00000000000002b0 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:571    .text.spi1ReadBytes:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:578    .text.spi1ReadBytes:0000000000000000 spi1ReadBytes
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:687    .text.spi1ReadBytes:000000000000007c $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:693    .text.spi1WriteBytes:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:700    .text.spi1WriteBytes:0000000000000000 spi1WriteBytes
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:801    .text.spi1WriteBytes:0000000000000070 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:808    .text.spi1ReadOneByte:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:815    .text.spi1ReadOneByte:0000000000000000 spi1ReadOneByte
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:922    .text.spi1ReadOneByte:0000000000000080 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:928    .text.spi1WriteOneByte:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:935    .text.spi1WriteOneByte:0000000000000000 spi1WriteOneByte
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1043   .text.spi1WriteOneByte:000000000000007c $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1050   .text.DMA2_Stream0_IRQHandler:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1057   .text.DMA2_Stream0_IRQHandler:0000000000000000 DMA2_Stream0_IRQHandler
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1088   .text.DMA2_Stream0_IRQHandler:000000000000001c $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1094   .text.DMA2_Stream3_IRQHandler:0000000000000000 $t
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1101   .text.DMA2_Stream3_IRQHandler:0000000000000000 DMA2_Stream3_IRQHandler
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1127   .text.DMA2_Stream3_IRQHandler:0000000000000018 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1148   .bss.transferComplete:0000000000000000 transferComplete
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1136   .bss.dummy.0:0000000000000000 dummy.0
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1137   .bss.dummy.0:0000000000000000 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1142   .bss.dummy.1:0000000000000000 dummy.1
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1143   .bss.dummy.1:0000000000000000 $d
/var/folders/9y/n02fl3g16gnf7ppy14xghdy80000gn/T//cc0dL2h7.s:1149   .bss.transferComplete:0000000000000000 $d

UNDEFINED SYMBOLS
puts
